"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3944],{95724:function(t,e,r){r.d(e,{F2:function(){return o},t$:function(){return s}});class a{isRight(){return!1}isLeft(){return!0}constructor(t){this.value=t}}class n{isRight(){return!0}isLeft(){return!1}constructor(t){this.value=t}}let s=t=>new a(t),o=t=>new n(t)},76206:function(t,e,r){r.d(e,{J:function(){return n}});var a=r(38152);class n{get id(){return this._id}equals(t){return t===this||t.id===this._id}constructor(t,e){this.props=t,this._id=null!=e?e:new a.E(e)}}},38152:function(t,e,r){r.d(e,{E:function(){return n}});var a=r(20920);class n{toString(){return this.value}toValue(){return this.value}equals(t){return t.toValue()===this.value}constructor(t){this.value=null!=t?t:(0,a.Z)()}}},16305:function(t,e,r){r.d(e,{K:function(){return a}});class a{equals(t){return null!=t&&void 0!==t.props&&JSON.stringify(t.props)===JSON.stringify(this.props)}constructor(t){this.props=t}}},12925:function(t,e,r){r.d(e,{g:function(){return a}});class a{constructor(t){var e,r;if(this.message=["Erro desconhecido."],null==t?void 0:null===(r=t.response)||void 0===r?void 0:null===(e=r.data)||void 0===e?void 0:e.message){let e=t.response.data.message;this.message=Array.isArray(e)?e:[e]}}}},18425:function(t,e,r){r.d(e,{T:function(){return a}});class a{constructor(){this.message=["Resource not found."]}}},29517:function(t,e,r){r.d(e,{u:function(){return Q},m:function(){return X}});var a,n,s,o,u,i,c,d,l,p,h=r(57437),m=r(95724),g=r(11490),A=r(12925),C=r(38152),f=r(21114);class k{static toDomain(t){return f.n.create({id:new C.E(t.id),name:t.name,email:t.email,phone:t.phone,dateOfBirth:t.dateOfBirth,nickName:t.nickName,avatarUrl:t.avatarUrl,biography:t.biography,document:t.document,role:t.role,validatedAt:t.validatedAt,createdAt:t.createdAt,updatedAt:t.updatedAt})}}async function b(){try{let{data:t}=await g.h.get("/me"),e=k.toDomain(t.user);return(0,m.F2)({user:e})}catch(t){return(0,m.t$)(new A.g(t))}}var y=r(16305);class N extends y.K{get userId(){return this.props.userId}get name(){return this.props.name}get email(){return this.props.email}get campaignsCreatedCount(){return this.props.campaignsCreatedCount}get donationsCount(){return this.props.donationsCount}static create(t){return new N(t)}}class w{static toDomain(t){return N.create({userId:new C.E(t.userId),name:t.name,email:t.email,campaignsCreatedCount:t.campaignsCreatedCount,donationsCount:t.donationsCount})}}async function D(){try{let{data:t}=await g.h.get("/me/details"),e=w.toDomain(t.userDetails);return(0,m.F2)({userDetails:e})}catch(t){return(0,m.t$)(new A.g(t))}}var v=r(70277),B=r(16463),E=r(20610),I=r(2265);async function O(t){let{email:e,password:r}=t;try{let{data:t}=await g.h.post("/sessions",{email:e,password:r});return(0,v.setCookie)(void 0,"@TamoJuntoAuth:token",t.access_token,{maxAge:604800,path:"/"}),g.h.defaults.headers.Authorization="Bearer ".concat(t.access_token),(0,m.F2)(null)}catch(t){return(0,m.t$)(new A.g(t))}}async function R(t){let{name:e,email:r,phone:a,date_of_birth:n,document:s,password:o}=t;try{return await g.h.post("/accounts",{name:e,email:r,phone:a,date_of_birth:n,document:s,password:o}),(0,m.F2)(null)}catch(t){return(0,m.t$)(new A.g(t))}}async function T(t){let{profile:e,address:r,social_media:a}=t;try{let{data:t}=await g.h.put("/accounts",{profile:e,address:r,social_media:a});return(0,m.F2)(null)}catch(t){return(0,m.t$)(new A.g(t))}}var F=r(18425);class L extends y.K{get country(){return this.props.country}get street(){return this.props.street}get neighborhood(){return this.props.neighborhood}get city(){return this.props.city}get state(){return this.props.state}get zip_code(){return this.props.zipCode}get complement(){return this.props.complement}static create(t){return new L(t)}}class S{static toDomain(t){return L.create({country:t.address.props.country,street:t.address.props.street,neighborhood:t.address.props.neighborhood,city:t.address.props.city,state:t.address.props.state,zipCode:t.address.props.zipCode,complement:t.address.props.complement})}}var _=r(38472);async function M(){try{let{data:t}=await g.h.get("/me/address"),e=S.toDomain(t);return(0,m.F2)({address:e})}catch(e){var t;if(_.Z.isAxiosError(e)&&(null===(t=e.response)||void 0===t?void 0:t.status)===404)return(0,m.t$)(new F.T);return(0,m.t$)(new A.g(e))}}class U extends y.K{get socialName(){return this.props.socialName}get facebook(){return this.props.facebook}get instagram(){return this.props.instagram}get youtube(){return this.props.youtube}get linkedin(){return this.props.linkedin}static create(t){return new U(t)}}class ${static toDomain(t){return U.create({socialName:t.socialMedia.props.socialName,facebook:t.socialMedia.props.facebook,instagram:t.socialMedia.props.instagram,youtube:t.socialMedia.props.youtube,linkedin:t.socialMedia.props.linkedin})}}async function P(){try{let{data:t}=await g.h.get("/me/social-media"),e=$.toDomain(t);return(0,m.F2)({socialMedia:e})}catch(e){var t;if(_.Z.isAxiosError(e)&&(null===(t=e.response)||void 0===t?void 0:t.status)===404)return(0,m.t$)(new F.T);return(0,m.t$)(new A.g(e))}}async function G(t){let{userId:e,name:r,email:a,document:n,phone:s,birthdate:o,professionalOccupation:u,userAccountAddress:i,userBankAccount:c}=t;try{let{data:t}=await g.h.post("/accounts/banks",{userId:e,name:r,email:a,document:n,phone:s,birthdate:o,professionalOccupation:u,userAccountAddress:i,userBankAccount:c});return(0,m.F2)(null)}catch(t){return(0,m.t$)(new A.g(t))}}(a=i||(i={})).CHECKING="CHECKING",a.SAVINGS="SAVINGS",(n=c||(c={})).INDIVIDUAL="INDIVIDUAL",n.COMPANY="COMPANY";var V=r(23148);class J{static toDomain(t){var e,r;return V.Z.create({id:new C.E(t.id),userId:new C.E(t.userId),name:t.name,email:t.email,document:t.document,birthdate:t.birthdate,professionalOccupation:t.professionalOccupation,userBankAccount:t.userBankAccount.map(t=>({id:new C.E(t.id),userBankId:new C.E(t.userBankId),holderName:t.holderName,holderType:t.holderType,holderDocument:t.holderDocument,bankName:t.bankName,bankCode:t.bankCode,branchNumber:t.branchNumber,branchCheckDigit:t.branchCheckDigit,accountNumber:t.accountNumber,accountCheckDigit:t.accountCheckDigit,accountType:t.accountType,status:t.status})),userBankAddress:null!==(r=null===(e=t.userBankAddress)||void 0===e?void 0:e.map(t=>({id:new C.E(t.id),userBankId:new C.E(t.userBankId),street:t.street,complement:t.complement,number:t.number,neighborhood:t.neighborhood,city:t.city,state:t.state,country:t.country,zipCode:t.zipCode,referencePoint:t.referencePoint})))&&void 0!==r?r:[],createdAt:new Date(t.createdAt),updatedAt:t.updatedAt?new Date(t.updatedAt):null})}}async function x(){try{let{data:t}=await g.h.get("/accounts/banks/details"),e=t.userAccount.map(J.toDomain);return(0,m.F2)({userAccounts:e})}catch(t){return(0,m.t$)(new A.g(t))}}var K=r(43751);(s=d||(d={})).CHECKING="CHECKING",s.SAVINGS="SAVINGS",(o=l||(l={})).INDIVIDUAL="INDIVIDUAL",o.COMPANY="COMPANY",(u=p||(p={})).AVAILABLE="AVAILABLE",u.DISABLED="DISABLED";class z extends y.K{get id(){return this.props.id}get userBankId(){return this.props.userBankId}get holderName(){return this.props.holderName}get holderType(){return this.props.holderType}get holderDocument(){return this.props.holderDocument}get bankName(){return this.props.bankName}get bankCode(){return this.props.bankCode}get branchNumber(){return this.props.branchNumber}get branchCheckDigit(){return this.props.branchCheckDigit}get accountNumber(){return this.props.accountNumber}get accountCheckDigit(){return this.props.accountCheckDigit}get accountType(){return this.props.accountType}get status(){return this.props.status}get createdAt(){return this.props.createdAt}get updatedAt(){return this.props.updatedAt}static create(t){return new z(t)}}class Z{static toDomain(t){return z.create({id:new C.E(t.id),userBankId:new C.E(t.userBankId),holderName:t.holderName,holderType:t.holderType,holderDocument:t.holderDocument,bankName:t.bankName,bankCode:t.bankCode,branchNumber:t.branchNumber,branchCheckDigit:t.branchCheckDigit,accountNumber:t.accountNumber,accountCheckDigit:t.accountCheckDigit,accountType:t.accountType,status:t.status,createdAt:t.createdAt,updatedAt:t.updatedAt||null})}}async function Y(){try{let{data:t}=await g.h.get("/accounts/banks"),e=t.userAccount.map(Z.toDomain);return(0,m.F2)({userAccounts:e})}catch(t){return(0,m.t$)(new A.g(t))}}async function H(t){let{userEmail:e,userBankAccountId:r,bankCode:a,branchNumber:n,branchCheckDigit:s,accountNumber:o,accountCheckDigit:u,accountType:i}=t;try{return await g.h.put("/accounts/banks/".concat(r),{userEmail:e,userBankAccountId:r,bankCode:a,branchNumber:n,branchCheckDigit:s,accountNumber:o,accountCheckDigit:u,accountType:i}),(0,m.F2)(null)}catch(t){return(0,m.t$)(new A.g(t))}}async function W(t){let{email:e}=t;try{return await g.h.post("/password/forgot",{email:e}),(0,m.F2)(null)}catch(t){return(0,m.t$)(new A.g(t))}}async function j(t){let{token:e,password:r}=t;try{return await g.h.patch("/password/reset",{token:e,password:r}),(0,m.F2)(null)}catch(t){return(0,m.t$)(new A.g(t))}}let q=(0,I.createContext)({}),Q=t=>{let{children:e}=t,[r,a]=(0,I.useState)(null),[n,s]=(0,I.useState)(null),[o,u]=(0,I.useState)(null),[i,c]=(0,I.useState)(null),[d,l]=(0,I.useState)(null),[p,m]=(0,I.useState)(!1),[g,A]=(0,I.useState)(!1),[C,k]=(0,I.useState)(!1),y=(0,B.useRouter)(),N=(0,E.p)(),w=(0,I.useCallback)(async t=>{if((await H(t)).isLeft()){N({title:"Erro ao editar conta banc\xe1ria.",status:"error"});return}N({title:"Conta banc\xe1ria editada com sucesso!",status:"success"})},[]),F=(0,I.useCallback)(async t=>{if((await O(t)).isLeft())return m(!1),N({title:"Credenciais inv\xe1lidas.",status:"error"});m(!0),N({title:"Seja bem-vindo!",status:"success"}),tn(),y.push("/")},[y]),L=async t=>{if((await R(t)).isLeft())return N({title:"Erro ao se cadastrar.",status:"error"});N({title:"Cadastro efetuado com sucesso!",status:"success"}),y.push("/auth")},S=(0,I.useCallback)(async t=>{if((await T(t)).isLeft()){N({title:"Erro ao editar usu\xe1rio",status:"error"});return}N({title:"Usu\xe1rio editado com sucesso!",status:"success"})},[]),_=(0,I.useCallback)(async()=>{let t=await b();if(t.isRight()){a(t.value.user);return}},[]),U=(0,I.useCallback)(async()=>{let t=await M();if(t.isRight()){u(t.value.address);return}},[]),$=(0,I.useCallback)(async()=>{let t=await P();if(t.isRight()){c(t.value.socialMedia);return}},[]),V=(0,I.useCallback)(async()=>{let t=await D();if(t.isRight()){s(t.value.userDetails);return}s(null)},[]),J=(0,I.useCallback)(async()=>{let t=await x();if(t.isRight()){l(t.value.userAccounts);return}l(null)},[]),[z,Z]=(0,I.useState)([]),Q=(0,I.useCallback)(async()=>{let t=await Y();if(t.isRight()){Z(t.value.userAccounts);return}},[]),X=(0,I.useCallback)(async t=>{let e=await (0,K.Z)(t);if(e.isRight())return await J(),e.isRight();N({title:"Ocorreu algum erro. Tente novamente.",status:"error"})},[]),tt=(0,I.useCallback)(async t=>{let e=await W(t);return e.isLeft()?(N({title:"Ocorreu algum erro. Tente novamente.",status:"error"}),!1):e.isRight()},[]),te=(0,I.useCallback)(async t=>{let e=await j(t);return e.isLeft()?(N({title:"Ops! Ocorreu algum erro, tente novamente em instantes.",status:"error"}),!1):e.isRight()},[]),tr=(0,I.useCallback)(async t=>(await G(t)).isRight()?(await J(),N({title:"Conta banc\xe1ria criada com sucesso!",status:"success"}),{isSuccess:!0}):(N({title:"Ocorreu algum erro. Tente novamente.",status:"error"}),{isSuccess:!1}),[]);(0,I.useEffect)(()=>{_()},[p,C]),(0,I.useEffect)(()=>{V()},[r,g]);let ta=async()=>{(0,v.destroyCookie)(void 0,"@TamoJuntoAuth:token",{path:"/"}),(0,v.destroyCookie)(void 0,"@TamoJuntoAuth:refreshToken",{path:"/"}),tn(),a(null),y.push("/")},tn=()=>!!r&&(r.role===f.v.ADMIN||r.role===f.v.OWNER);return(0,h.jsx)(q.Provider,{value:{user:r,logout:ta,userDetails:n,userAddress:o,userBankAccount:z,getUserAddress:U,userSocialMedia:i,getUserSocialMedia:$,userBankAccountDetails:d,editUserBank:w,getUserDetails:V,getUserBankAccountDetails:J,editProfile:S,createBankAccount:tr,deleteBankAccountById:X,signIn:F,register:L,handleUpdateUserDetails:function(){A(!g)},getUser:_,verifyIsAdmin:tn,getUserBankAccount:Q,forgotPassword:tt,resetPassword:te},children:e})},X=()=>(0,I.useContext)(q)},43751:function(t,e,r){r.d(e,{Z:function(){return o}});var a=r(95724),n=r(12925),s=r(11490);async function o(t){try{let{bankAccountId:e}=t,{data:r}=await s.h.delete("/accounts/banks/".concat(e));return(0,a.F2)({bankAccountId:r.bankAccountId})}catch(t){return(0,a.t$)(new n.g(t))}}},23148:function(t,e,r){r.d(e,{Z:function(){return o},m:function(){return n}});var a,n,s=r(16305);(a=n||(n={})).AVAILABLE="AVAILABLE",a.DISABLED="DISABLED";class o extends s.K{get id(){return this.props.id}get userId(){return this.props.userId}get name(){return this.props.name}get email(){return this.props.email}get document(){return this.props.document}get birthdate(){return this.props.birthdate}get professionalOccupation(){return this.props.professionalOccupation}get userBankAccount(){return this.props.userBankAccount}get userBankAddress(){return this.props.userBankAddress}get createdAt(){return this.props.createdAt}get updatedAt(){return this.props.updatedAt}static create(t){return new o(t)}}},21114:function(t,e,r){r.d(e,{n:function(){return o},v:function(){return n}});var a,n,s=r(76206);(a=n||(n={})).USER="USER",a.ADMIN="ADMIN",a.OWNER="OWNER",a.CROWDFUNDER="CROWDFUNDER";class o extends s.J{get id(){return this.props.id}get name(){return this.props.name}get email(){return this.props.email}get phone(){return this.props.phone}get dateOfBirth(){return this.props.dateOfBirth}get nickName(){return this.props.nickName||""}get avatarUrl(){return this.props.avatarUrl||""}get biography(){return this.props.biography||""}get document(){return this.props.document}get password(){return this.props.password||""}get role(){return this.props.role}get validatedAt(){return this.props.validatedAt}get createdAt(){return this.props.createdAt}get updatedAt(){return this.props.updatedAt}static create(t){return new o(t)}}},11490:function(t,e,r){r.d(e,{h:function(){return s}});var a=r(38472),n=r(70277);let s=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=(0,n.parseCookies)(t),r=a.Z.create({baseURL:"https://api.tamojunto.me/prd",headers:{Authorization:"Bearer ".concat(e["@TamoJuntoAuth:token"])}});return r.interceptors.response.use(t=>t,e=>{var r;return(null===(r=e.response)||void 0===r?void 0:r.status)===401&&((0,n.destroyCookie)(t,"@TamoJuntoAuth:token",{path:"/"}),(0,n.destroyCookie)(t,"@TamoJuntoAuth:refreshToken",{path:"/"})),Promise.reject(e)}),r}()},6350:function(t,e,r){r.d(e,{O:function(){return a}});let a={COLOR_TJ_CONTA:"#782F9B",COLOR_TJ_CONTA_OPACITY:"#E9DBF0",TJ_CONTA_BG_BANNER:"#E9DBF0",COLOR_CAMPAIGNS_COMMON:"#65A300",COLOR_CAMPAIGNS_COMMON_OPACITY:"#E8F0DB",CAMPAIGNS_BG_BANNER_CAMPAIGNS_COMMON:"#E4F2CD",HEADER_COLOR:"#782F9B",BACKGROUND_COLOR:"#782F9B",OUTLINE_SELECT_COLOR:"#782F9B",transparent:"transparent",black:{100:"#455A64",200:"#383F47"},gray:{50:"#DADADA",100:"#C7C7C7",200:"#B3B3B3"},primary:"#65A300",primaryPalette:{100:"#E8F0DB",200:"#D1E0B8",300:"#B7D89A",400:"#9BCF7B",500:"#65A300",600:"#4F7F00",700:"#3A5C00",800:"#253900",900:"#131800"},secondary:"#782F9B",secondaryPalette:{100:"#E9DBF0",200:"#D1B2E0",300:"#B78ED1",400:"#9B5BB8",500:"#782F9B",600:"#5B1F6D",700:"#3E0F4A",800:"#2A0028",900:"#1A0017"},white:"#fff"}}}]);