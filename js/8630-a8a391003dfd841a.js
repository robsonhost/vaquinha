"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8630],{97837:function(t,e,a){a.d(e,{K:function(){return y},T:function(){return S}});var r,n,s=a(57437),u=a(95724),i=a(12925),c=a(11490);async function o(t){let{withdrawId:e}=t;try{return await c.h.patch("/withdraws/".concat(e,"/approve")),(0,u.F2)(null)}catch(t){return(0,u.t$)(new i.g(t))}}async function l(t){let{withdrawId:e}=t;try{return await c.h.patch("/withdraws/".concat(e,"/cancel")),(0,u.F2)(null)}catch(t){return(0,u.t$)(new i.g(t))}}async function d(t){let{walletId:e,targetId:a,authorEmail:r,amount:n,transferType:s="TED",address:o}=t;try{let t=await c.h.post("/withdraws",{walletId:e,targetId:a,authorEmail:r,amount:n,transferType:s,address:o});return console.log(t),(0,u.F2)(null)}catch(t){return(0,u.t$)(new i.g(t))}}(r=n||(n={})).TED="TED",r.PIX="PIX";var p=a(38152),h=a(60530);class w{static toDomain(t){return h.ed.create({id:new p.E(t.id),walletId:new p.E(t.walletId),targetId:new p.E(t.targetId),approverId:t.approverId?new p.E(t.approverId):null,author:{id:new p.E(t.author.id),name:t.author.name,email:t.author.email,phone:t.author.phone,documentImageFront:t.author.documentImageFront,documentImageVerse:t.author.documentImageVerse,documentSentAt:t.author.documentSentAt?new Date(t.author.documentSentAt):null},campaign:{slug:t.campaign.slug},amountRequested:t.amountRequested,fee:t.fee,status:t.status,transferType:t.transferType,reason:t.reason,createdAt:new Date(t.createdAt),updatedAt:t.updatedAt?new Date(t.updatedAt):null})}}async function g(t){let{page:e=1,authorEmail:a,status:r,search:n=null}=t;try{let{data:t}=await c.h.post("/withdraws/list?page=".concat(e,"&search=").concat(n,"&status=").concat(r),{authorEmail:a}),s=t.withdraws.map(w.toDomain);return(0,u.F2)({withdraws:s,pages:t.totalPages})}catch(t){return(0,u.t$)(new i.g(t))}}var A=a(53488);class m{static toDomain(t){return A.Y.create({authorEmail:t.authorEmail,sourceId:new p.E(t.sourceId),targetId:new p.E(t.targetId),amount:t.amount,fee:t.fee,type:t.type,availableAt:new Date(t.availableAt),validatedAt:t.validatedAt?new Date(t.validatedAt):null,createdAt:new Date(t.createdAt),updatedAt:t.updatedAt?new Date(t.updatedAt):null})}}async function v(t){let{page:e=1}=t;try{let{data:t}=await c.h.get("/transactions",{params:{page:e}}),a=t.transactions.map(m.toDomain);return(0,u.F2)({transactions:a,pages:t.totalPages})}catch(t){return(0,u.t$)(new i.g(t))}}async function E(t){let{withdrawId:e,reason:a}=t;try{return await c.h.patch("/withdraws/".concat(e,"/reject"),{reason:a}),(0,u.F2)(null)}catch(t){return(0,u.t$)(new i.g(t))}}var f=a(20610),I=a(2265);let D=(0,I.createContext)({}),y=t=>{let{children:e}=t,[a,r]=(0,I.useState)([]),[n,u]=(0,I.useState)(0),[i,c]=(0,I.useState)([]),[p,h]=(0,I.useState)(0),w=(0,f.p)(),A=async t=>(await d(t)).isLeft()?(w({title:"Ocorreu um erro ao criar o saque. Tente novamente mais tarde.",status:"error",duration:5e3,isClosable:!0}),{isSuccess:!1}):{isSuccess:!0},m=async t=>{let e=await g(t);return e.isRight()?(1===t.page?r(e.value.withdraws):r(t=>[...t,...e.value.withdraws]),u(e.value.pages),{isSuccess:!0}):{isSuccess:!1}},y=(0,I.useCallback)(async t=>{let e=await v(t);return e.isRight()?(1===t.page?c(e.value.transactions):c(t=>[...t,...e.value.transactions]),h(e.value.pages),{isSuccess:!0}):{isSuccess:!1}},[]),S=async t=>(await E(t)).isLeft()?{isSuccess:!1}:{isSuccess:!0},L=async t=>(await o(t)).isLeft()?(w({title:"Ocorreu um erro ao aprovar o saque. Tente novamente mais tarde.",status:"error",duration:5e3,isClosable:!0}),{isSuccess:!1}):(w({title:"Saque aprovado com sucesso.",status:"success",duration:5e3,isClosable:!0}),{isSuccess:!0}),C=async t=>(await l(t)).isLeft()?{isSuccess:!1}:{isSuccess:!0};return(0,s.jsx)(D.Provider,{value:{createWithdraw:A,fetchWithdraws:m,rejectWithdraw:S,approveWithdraw:L,cancelWithdraw:C,fetchTransactions:y,totalPagesTransactions:p,totalPagesWithdraws:n,withdraws:a,transactions:i},children:e})},S=()=>(0,I.useContext)(D)},16364:function(t,e,a){a.d(e,{n:function(){return f},O:function(){return I}});var r=a(57437),n=a(95724),s=a(11490),u=a(12925),i=a(38152),c=a(16305);class o extends c.K{get id(){return this.props.id}get authorEmail(){return this.props.authorEmail}get sourceId(){return this.props.sourceId}get amountAvailable(){return this.props.amountAvailable}get amountPending(){return this.props.amountPending}get amountCanceled(){return this.props.amountCanceled}get createdAt(){return this.props.createdAt}get updatedAt(){return this.props.updatedAt}static create(t){return new o(t)}}class l{static toDomain(t){return o.create({id:new i.E(t.id),sourceId:new i.E(t.sourceId),authorEmail:t.authorEmail,amountAvailable:t.amountAvailable,amountPending:t.amountPending,amountCanceled:t.amountCanceled,createdAt:new Date(t.createdAt),updatedAt:t.updatedAt?new Date(t.updatedAt):null})}}async function d(t){let{sourceId:e,page:a=1}=t;try{let{data:t}=await s.h.get("/wallets?page=".concat(a).concat(e?"&sourceId=".concat(e):"")),r=t.wallets.map(l.toDomain);return(0,n.F2)({wallets:r})}catch(t){return(0,n.t$)(new u.g(t))}}var p=a(63178);class h{static toDomain(t){return p.V.create({id:new i.E(t.id),campaign:{slug:t.campaign.slug,title:t.campaign.title},createdAt:new Date(t.createdAt),updatedAt:t.updatedAt?new Date(t.updatedAt):null})}}async function w(t){let{only:e}=t;try{let{data:t}=await s.h.get("/wallets/details".concat(e?"?only=".concat(e):"")),a=t.wallets.map(t=>h.toDomain(t));return(0,n.F2)({wallets:a})}catch(t){return(0,n.t$)(new u.g(t))}}class g extends c.K{get walletAvailable(){return this.props.walletAvailable}get walletPending(){return this.props.walletPending}get withdrawalApproved(){return this.props.withdrawalApproved}get withdrawalPending(){return this.props.withdrawalPending}get totalRaised(){return this.props.totalRaised}get fees(){return this.props.fees}static create(t){return new g(t)}}class A{static toDomain(t){return g.create({walletAvailable:t.walletAvailable,walletPending:t.walletPending,withdrawalApproved:t.withdrawalApproved,withdrawalPending:t.withdrawalPending,totalRaised:t.totalRaised,fees:t.fees})}}async function m(){try{let{data:t}=await s.h.get("/wallets/report"),e=A.toDomain(t.report);return(0,n.F2)({report:e})}catch(t){return(0,n.t$)(new u.g(t))}}var v=a(2265);let E=(0,v.createContext)({}),f=t=>{let{children:e}=t,[a,n]=(0,v.useState)([]),[s,u]=(0,v.useState)({}),[i,c]=(0,v.useState)(),o=(0,v.useCallback)(async t=>{let e=await d(t);return e.isLeft()?{isSuccess:!1}:(n(e.value.wallets),u(e.value.wallets[0]),{isSuccess:!0})},[]),l=(0,v.useCallback)(async()=>{let t=await m();return t.isLeft()?{isSuccess:!1}:(c(t.value.report),{isSuccess:!0})},[]),[p,h]=(0,v.useState)([]),g=(0,v.useCallback)(async t=>{let e=await w(t);return e.isLeft()?{isSuccess:!1}:(h(e.value.wallets),{isSuccess:!0})},[]);return(0,r.jsx)(E.Provider,{value:{fetchWallets:o,fetchWalletDetails:g,walletsDetails:p,wallets:a,selectedWallet:s,setWallets:n,fetchWalletsReport:l,walletsReport:i},children:e})},I=()=>(0,v.useContext)(E)},53488:function(t,e,a){a.d(e,{L:function(){return n},Y:function(){return u}});var r,n,s=a(16305);(r=n||(n={})).AVAILABLE="AVAILABLE",r.PENDING="PENDING",r.CANCELED="CANCELED";class u extends s.K{get id(){return this.props.id}get authorEmail(){return this.props.authorEmail}get sourceId(){return this.props.sourceId}get targetId(){return this.props.targetId}get amount(){return this.props.amount}get fee(){return this.props.fee}get type(){return this.props.type}get availableAt(){return this.props.availableAt}get validatedAt(){return this.props.validatedAt}get createdAt(){return this.props.createdAt}get updatedAt(){return this.props.updatedAt}static create(t){return new u(t)}}},60530:function(t,e,a){a.d(e,{OD:function(){return s},ed:function(){return c}});var r,n,s,u,i=a(16305);(r=s||(s={})).ALL="ALL",r.DONE="DONE",r.PENDING="PENDING",r.CANCELED="CANCELED",r.REJECTED="REJECTED",(n=u||(u={})).TED="TED",n.PIX="PIX";class c extends i.K{get id(){return this.props.id}get walletId(){return this.props.walletId}get targetId(){return this.props.targetId}get approverId(){return this.props.approverId}get amountRequested(){return this.props.amountRequested}get author(){return this.props.author}get campaign(){return this.props.campaign}get fee(){return this.props.fee}get status(){return this.props.status}get transferType(){return this.props.transferType}get approvedAt(){return this.props.approvedAt}get reason(){return this.props.reason}get createdAt(){return this.props.createdAt}get updatedAt(){return this.props.updatedAt}static create(t){return new c(t)}}},63178:function(t,e,a){a.d(e,{P:function(){return n},V:function(){return u}});var r,n,s=a(16305);(r=n||(n={})).ALL="ALL",r.AVAILABLE="AVAILABLE",r.PENDING="PENDING";class u extends s.K{get id(){return this.props.id}get campaign(){return this.props.campaign}get createdAt(){return this.props.createdAt}get updatedAt(){return this.props.updatedAt}static create(t){return new u(t)}}}}]);